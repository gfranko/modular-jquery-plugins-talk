<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Modular jQuery Plugins</title>
    <link rel="stylesheet" type="text/css" href="css/css.css">
    <!-- <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css"> -->
  </head>
  <body>
    <article>
      <section data-bespoke-state="pre-progress clean">
        <h2 data-bespoke-bullet class="first-header">Modular jQuery Plugins</h2>
        <div class="image-group">
          <img src="imgs/jquery.png" alt="" title="jQuery">
          <img src="imgs/jqueryui.png" alt="" title="jQueryUI Widget Factory">
          <img src="imgs/constructionhat.png" alt="" title="jqfactory">
          <img src="imgs/grunt.jpeg" alt="" title="Grunt">
          <img src="imgs/downloadbuilder.png" alt="" title="DownloadBuilder" class="downloadbuilder-img">
        </div>
        <span class="small-font">
          Slides: <a href="http://gregfranko.com/modular-jquery-plugins-talk/">http://gregfranko.com/modular-jquery-plugins-talk/</a>
        </span>
      </section>
      <section data-bespoke-state="pre-progress clean" class="font no-color">
        <img src="imgs/gregfranko.jpeg" alt="" title="Greg Franko" class="profilepic">
        <h2 data-bespoke-bullet>Greg Franko</h2>
        <div class="bullet-grouping">
          <li data-bespoke-bullet><span class="bold">Day Job:</span> JavaScript Engineer at AddThis</li>
          <li data-bespoke-bullet><span class="bold">Open Source:</span> BoilerplateMVC, jQuery plugins, etc</li>
          <li data-bespoke-bullet><span class="bold">Author:</span> Dependency Managment w/ RequireJS</li>
          <li data-bespoke-bullet><span class="bold">Speaker:</span> jQuery Portland!</li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color" class="font">
        <h2 data-bespoke-bullet class="slide-header">What does Modular Mean to You?</h2>
        <div class="bullet-grouping modular">
          <li data-bespoke-bullet>Smaller Pieces</li>
          <li data-bespoke-bullet>Limited Scope (does one thing and does it well)</li>
          <li data-bespoke-bullet>Maintainable</li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="">Inspiration For This Talk</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            <img src="imgs/requirejs.png" alt="" title="RequireJS">
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="smaller-header">Example Require.js Module</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            <pre>
              <code data-language="javascript">
// Options Module
// --------------
// The define method is passed a JavaScript function
define(function () {
  // Returns an object literal with our options
  return {
    showEffect: 'fadeIn',
    hideEffect: 'slideUp'
  }
});
              </code>
          </pre>
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="smaller-header">How Does This Apply to jQuery Plugins?</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            <span class="bold">Typical jQuery Plugin:</span>
            <pre>
              <code data-language="javascript">
// Adding the tooltip method to the jQuery prototype
$.fn.tooltip = function ( options ) {
  return this.each(function () {
    // Boilerplate jQuery plugin code goes here
  });
  // Plugin Constructor
  function Tooltip() {};
  // All my plugin logic goes here
  Tooltip.prototype = {};
  //Default Options
  $.fn.tooltip.options = {};
}
              </code>
          </pre>
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="slide-header">Is this bad?</h2>
        <div class="bullet-grouping modular">
          <li data-bespoke-bullet>For small plugins this will work fine</li>
          <li data-bespoke-bullet>For medium to large plugins this is not maintainable</li>
          <li data-bespoke-bullet>How can we make it maintainable?</li>
          <li data-bespoke-bullet><span class="bold">Abstract the boilerplate</span></li>
          <li data-bespoke-bullet><span class="bold">Assemble our plugin into independent pieces</span></li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="">Let the Refactor Begin!</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            We have tools to help us...
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <img src="imgs/jqueryui.png" alt="" title="jQueryUI Widget Factory" class="float-left margin-left">
        <h2 data-bespoke-bullet class="float-left margin-left">jQueryUI Widget Factory</h2>
        <div class="bullet-grouping clear jquery-widget-factory">
          <li data-bespoke-bullet>
            Provides a consistent foundation and API
          </li>
          <li data-bespoke-bullet>
            Removes jQuery plugin boilerplate code
          </li>
          <li data-bespoke-bullet>
            Let's us create plugins using object literals
          </li>
          <li data-bespoke-bullet>
            Can be used independently of jQueryUI
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Example Widget Factory Plugin</h2>
          <li data-bespoke-bullet>
            <pre>
<code data-language="javascript">
// Calling the jQueryUI Widget Factory Method
$.widget("an.example", {
  // These options will be used as defaults
  options: {
    someOption: true
  },
  // Constructor
  _create: function(internal) {}
  // Custom method we added to our plugin instance
  customMethod: function() {}
  // The rest of your plugin goes here
});
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Calling Our Plugin</h2>
        <li data-bespoke-bullet>
          <span class="bold">The same as any other jQuery plugin</span>
          <pre>
            <code data-language="javascript">
                $('.test').example();
            </code>
          </pre>
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 class="smaller-header slide-header">Let's Review The State Of Our Plugin</h2>
        <li data-bespoke-bullet></li>
        <li data-bespoke-bullet>
          <div class="bold">What We Have Done:</div>
        </li>
        <li data-bespoke-bullet>
          Removed the jQuery plugin boilerplate
        </li>
        <li data-bespoke-bullet>
          <div class="bold">What We Still Need To Do:</div>
        </li>
        <li data-bespoke-bullet>
            Separate our plugin into independent pieces
        </li>
        <li data-bespoke-bullet>
            Create a command-line build process
        </li>
        <li data-bespoke-bullet>
            Create a web build process
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Let's Create Our First File!</h2>
          <li data-bespoke-bullet>
            <span class="bold">This file will hold our default options</span>
            <pre>
<code data-language="javascript">
// options.js
// ----------
var example = {};
example.options = {
  someOption: true
};
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>On To The Next File!</h2>
          <li data-bespoke-bullet>
            <span class="bold">This file will hold our plugin constructor function</span>
            <pre>
<code data-language="javascript">
// _create.js
// ----------
example._create = function() {
  // Our constructor logic goes here
};
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2>Can you see the pattern?</h2>
        <li data-bespoke-bullet></li>
        <li data-bespoke-bullet>
          It is a bit overkill to create a new file for each method
        </li>
        <li data-bespoke-bullet>
          <span class="bold">Make logical modular design decisions</span>
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Once We Are Done Decoupling...</h2>
          <li data-bespoke-bullet>
            <span class="bold">We create our plugin!</span>
            <pre>
<code data-language="javascript">
// _plugin.js
// ----------
// Calling the jQueryUI Widget Factory Method
$.widget("an.example", example);
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 class="smaller-header slide-header">Let's Review The State Of Our Plugin</h2>
        <li data-bespoke-bullet></li>
        <li data-bespoke-bullet>
          <div class="bold">What We Have Done:</div>
        </li>
        <li data-bespoke-bullet>
          Removed the jQuery plugin boilerplate
        </li>
        <li data-bespoke-bullet>
            Separated our plugin into independent pieces
        </li>
        <li data-bespoke-bullet>
          <div class="bold">What We Still Need To Do:</div>
        </li>
        <li data-bespoke-bullet>
            Create a command-line build process
        </li>
        <li data-bespoke-bullet>
            Create a web build process
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 class="smaller-header slide-header">Before We Review the Build Process...</h2>
        <li data-bespoke-bullet></li>
        <li data-bespoke-bullet>Let's Answer a Common Question</li>
        <li data-bespoke-bullet><span class="bold">Are There Alternatives To The Widget Factory?</span></li>
        <li data-bespoke-bullet>
          Now that you mention it...
        </li>
        <li data-bespoke-bullet>
          I would like to officially release <span class="bold">jqfactory</span>
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <img src="imgs/constructionhat.png" alt="" title="jQueryUI Widget Factory" class="float-left margin-left">
        <h2 data-bespoke-bullet class="float-left margin-left">jqfactory</h2>
        <div class="bullet-grouping clear jquery-widget-factory">
          <li data-bespoke-bullet>
            Inspired by the jQueryUI Widget Factory
          </li>
          <li data-bespoke-bullet>
            Supports jQuery prototype namespacing
          </li>
          <li data-bespoke-bullet>
            Includes an elegant, promises-based, solution for asynchronous initializations
          </li>
          <li data-bespoke-bullet>
            Automatic event binding
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Example jqfactory Plugin</h2>
          <li data-bespoke-bullet>
            <pre class="jqfactory-example">
<code data-language="javascript">
    // Calling the jqfactory Method
   $.jqfactory('person.greg', {
        // Default plugin options
        options: {
            occupation: 'JavaScript Engineer'
        },
        // Plugin Constructor (called first)
        _create: function() {},
        // Dom manipulation goes here (called second)
        _render: function() {},
        // Plugin event bindings (called third)
        _events: {
            'click': function() {}
        },
        // All event listeners are now bound (called last)
        _postevents: function() {}
    });
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="smaller-header slide-header">jQueryUI Widget Factory or jqfactory?</h2>
        <div class="bullet-grouping clear jquery-widget-factory">
          <li data-bespoke-bullet><span class="bold">It depends</span></li>
          <li data-bespoke-bullet>Both are great solutions with fundamental differences</li>
          <li data-bespoke-bullet><span class="bold">Important Note:</span></li>
          <li data-bespoke-bullet>jQueryUI Widget Factory is battle tested</li>
          <li data-bespoke-bullet>jqfactory is new</li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="smaller-header slide-header">We Won't Be Reviewing jqfactory In Detail...</h2>
        <li data-bespoke-bullet>But if you are interested in it:</li>
        <li data-bespoke-bullet><a href="https://github.com/gfranko/jqfactory">https://github.com/gfranko/jqfactory</a></li>
        <li data-bespoke-bullet><span class="bold">Now back to our plugin!</span></li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="">Plugin Build Process</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            With Grunt.js!
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <img src="imgs/grunt.png" alt="" title="Grunt" class="float-left margin-left grunt-icon">
        <h2 data-bespoke-bullet class="float-left margin-left">Grunt</h2>
        <div class="bullet-grouping clear jquery-widget-factory">
          <li data-bespoke-bullet>
            JavaScript (Node.js) Task Runner
          </li>
          <li data-bespoke-bullet>
            Perfect for automating repetitive tasks
          </li>
          <li data-bespoke-bullet>
            A huge plugin ecosystem
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="smaller-header">Creating Our Gruntfile Part 1</h2>
          <li data-bespoke-bullet>
            <pre class="gruntfile-example">
<code data-language="javascript">
// Gruntfile.js
module.exports = function(grunt) {
  var baseFilePath = 'src/js/',
    fileToBuild = baseFilePath + 'jquery.customBuild.js';
  // Our Grunt configuration
  grunt.initConfig({
    concat: {
      dist: {
        src: '<%= customBuild.files %>',
        dest: fileToBuild
      }
    },
    wrap: {
      modules: {
        src: [fileToBuild],
        wrapper: [';(function($, undefined) {\n', '\n}(jQuery));']
      }
    }
  });
  grunt.loadNpmTasks('grunt-contrib-concat');
  grunt.loadNpmTasks('grunt-wrap');
  // Our custom task will go here next
}
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="smaller-header">Creating Our Gruntfile Part 2</h2>
          <li data-bespoke-bullet>
            <pre class="gruntfile-example">
<code data-language="javascript">
// Registers a default Grunt Task
grunt.registerTask('customBuild', 'customBuild task', function() {
  var defaultFiles = ['options', '_create', '_plugin', 'customMethod'],
    args = this.args, customFiles = [], index, i = -1;
  // Loops through and excludes any file that was passed
  if(args.length) {
    while(++i < args.length) {
      index = defaultFiles.indexOf(args[i]);
      if(index !== -1) defaultFiles.splice(index, 1);
    }
  }
  // Makes sure that each passed file has the correct file path
  customFiles = defaultFiles.map(function(currentFile) {
    return baseFilePath + currentFile + '.js';
  });
  // Sets a Grunt configuration variable
  grunt.config.set('customBuild.files', customFiles);
  // Run's the Grunt concat plugin
  grunt.task.run('concat', 'wrap');
});
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Running Our Custom Build</h2>
        <li data-bespoke-bullet>
          <span class="bold">On The Command Line:</span>
          <pre>
            <code data-language="javascript">
            grunt customBuild
            </code>
          </pre>
        </li>
        <li data-bespoke-bullet>
          <span class="bold">This will include all of our files</span>
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet>Excluding a File In Your Build</h2>
        <li data-bespoke-bullet>
          <span class="bold">On The Command Line:</span>
          <pre>
            <code data-language="javascript">
            grunt customBuild:customMethod
            </code>
          </pre>
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <li data-bespoke-bullet>
          <h2>Success!</h2>
          <img src="imgs/gruntcustombuild.png" alt="" title="Grunt Custom Build" class="grunt-custom-build">
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
      <h2 data-bespoke-bullet>Plugin Source Code</h2>
          <li data-bespoke-bullet>
            <pre class="gruntfile-example">
<code data-language="javascript">
;(function($, undefined) {
// options.js
// ----------
var example = {};
example.options = {
  someOption: true
};
// _create.js
// ----------
example._create = function() {
  // Our constructor logic goes here
};
// _plugin.js
// ----------
// Calling the jQueryUI Widget Factory Method
$.widget("an.example", example);
}(jQuery));
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 class="smaller-header slide-header">Let's Review The State Of Our Plugin</h2>
        <li data-bespoke-bullet></li>
        <li data-bespoke-bullet>
          <div class="bold">What We Have Done:</div>
        </li>
        <li data-bespoke-bullet>
          Removed the jQuery plugin boilerplate
        </li>
        <li data-bespoke-bullet>
            Separated our plugin into independent pieces
        </li>
        <li data-bespoke-bullet>
            Created a command-line build process
        </li>
        <li data-bespoke-bullet>
          <div class="bold">What We Still Need to Do:</div>
        </li>
        <li data-bespoke-bullet>
            Create a web build process
        </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="">Web Custom Build</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            With DownloadBuilder.js!
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <img src="imgs/downloadbuilder.png" alt="" title="DownloadBuilder.js" class="float-left margin-left downloadbuilder-page-img">
        <h2 data-bespoke-bullet class="float-left margin-left">DownloadBuilder.js</h2>
        <div class="bullet-grouping clear margin-left">
          <li data-bespoke-bullet>
            Fetches and Concatenates Files From Github
          </li>
          <li data-bespoke-bullet>
            Saves files using the HTML5 FileSystem API
          </li>
          <li data-bespoke-bullet>
            Supports caching via HTML5 Session Storage
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
      <h2 data-bespoke-bullet>First Step</h2>
          <li data-bespoke-bullet>
            <span class="bold">Create your HTML</span>
          </li>
          <li data-bespoke-bullet>
            <pre class="downloadbuilder-example">
<code data-language="html">
<input class="hidden" checked="checked" type="checkbox" value="src/js/options.js">
<input class="hidden" checked="checked" type="checkbox" value="src/js/_create.js">
<input class="hidden" checked="checked" type="checkbox" value="src/js/_plugin.js">
<input class="visible" type="checkbox" value="src/js/customMethod.js">
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
      <h2 data-bespoke-bullet>Second Step</h2>
          <li data-bespoke-bullet>
            <span class="bold">Create a builder instance</span>
          </li>
          <li data-bespoke-bullet>
            <pre class="downloadbuilder-example2">
<code data-language="javascript">
                  var builder = new DownloadBuilder({
                    location: 'github',
                    author: 'gfranko',
                    repo: 'jquery.examplePlugin.js',
                    branch: 'master',
                    cache: true,
                    client_id: '',
                    client_secret: ''
                  });
              </code>
          </pre>
          </li>
          <li data-bespoke-bullet>
            Sorry, you have to use the new keyword
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
      <h2 data-bespoke-bullet>Final Step</h2>
          <li data-bespoke-bullet>
            <span class="bold">Build Your File</span>
          </li>
          <li data-bespoke-bullet>
            <pre class="downloadbuilder-example2">
<code data-language="javascript">
$('#generate-button').on('click', function() {
  var checkedBoxes = $('#js-files:checked'),
    fileName = 'jquery.examplePlugin.custom.js',
    language = 'javascript';

  builder.buildURL(checkedBoxes, fileName, language, function(data) {
    /*
    file - data.content
    file url - data.url
    file name - data.fileName
    file language - data.lang
    */
  });

});
              </code>
          </pre>
          </li>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="">Live Example</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            <a href="http://gregfranko.com/jquery.selectBoxIt.js/customDownload.html" class="small-font">http://gregfranko.com/jquery.selectBoxIt.js/customDownload.html</a>
          </li>
        </div>
      </section>
      <section data-bespoke-state="pre-progress clean color cards" class="font">
        <h2 data-bespoke-bullet class="">Closing Thoughts</h2>
        <div class="inspiration-images">
          <li data-bespoke-bullet>
            JavaScript Is Finally Being Taken Seriously
          </li>
          <li data-bespoke-bullet>
            <span class="bold">jQuery Plugins Should Be Too</span>
          </li>
        </div>
      </section>
      <section data-bespoke-state="clean color simple progress" class="font">
        <h2>Thank You!</h2>
        <li>
          <span class="bold">Github: </span> @gfranko
        </li>
        <li>
          <span class="bold">Twitter: </span> @gregfranko
        </li>
      </section>
    </article>
    <script src="js/bespoke.min.js"></script>
    <script src="js/bespoke-plugins.js"></script>
    <script src="js/prefixfree.min.js"></script>
    <script src="js/rainbow.min.js"></script>
    <script src="js/js.js"></script>
  </body>
</html>